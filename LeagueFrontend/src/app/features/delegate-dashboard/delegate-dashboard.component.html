<div class="flex min-h-screen bg-white font-sans text-gray-800">
      
    <aside class="w-64 bg-white border-r border-gray-100 flex flex-col fixed h-full z-20">
       <div class="h-16 flex items-center px-6 border-b border-gray-50">
          <svg class="w-6 h-6 text-[#34a01c] mr-2" viewBox="0 0 24 24" fill="currentColor">
             <path d="M19.07 4.93L17.66 6.34C18.5 7.18 19 8.24 19 9.41V10H21V9.41C21 7.74 20.26 6.13 19.07 4.93ZM21 14H19V14.59C19 16.5 17.5 18 15.59 18H15V20H15.59C18.57 20 21 17.57 21 14.59V14ZM10 4C7 4 4.5 6.5 4.5 9.5V10H6.5V9.5C6.5 7.57 8.07 6 10 6H10.5V4H10ZM6.5 14V14.59C6.5 15.76 7 16.82 7.84 17.66L6.43 19.07C5.24 17.87 4.5 16.26 4.5 14.59V14H6.5ZM12.75 2C12.75 1.59 12.41 1.25 12 1.25C11.59 1.25 11.25 1.59 11.25 2V8H5.25C4.84 8 4.5 8.34 4.5 8.75V15.25C4.5 15.66 4.84 16 5.25 16H11.25V22C11.25 22.41 11.59 22.75 12 22.75C12.41 22.75 12.75 22.41 12.75 22V16H18.75C19.16 16 19.5 15.66 19.5 15.25V8.75C19.5 8.34 19.16 8 18.75 8H12.75V2Z"/>
          </svg>
          <span class="text-xl font-bold text-[#34a01c] tracking-tight italic">FútbolGestor</span>
       </div>

       <nav class="flex-1 px-4 py-6 space-y-1 overflow-y-auto">
           @for (item of menuItems(); track item.id) {
             <a href="#" (click)="navigate($event, item.id)"
                class="flex items-center px-3 py-3 rounded-lg text-sm font-medium transition-colors group"
                [ngClass]="{
                  'bg-gray-50 text-[#34a01c]': currentView() === item.id,
                  'text-gray-500 hover:bg-gray-50 hover:text-gray-900': currentView() !== item.id
                }">
                <span class="mr-3" [innerHTML]="item.icon"></span>
                {{ item.label }}
             </a>
           }
       </nav>

       <div class="p-4 border-t border-gray-100">
           <button (click)="logout()" class="w-full flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white py-2.5 px-4 rounded-lg transition-colors font-semibold text-sm shadow-sm">
               <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
               Cerrar Sesión
           </button>
       </div>
    </aside>

    <div class="ml-64 flex-1 flex flex-col min-w-0 bg-gray-50/30">
       
       <header class="h-16 px-8 flex items-center justify-between bg-white border-b border-gray-100">
           <h2 class="text-lg font-bold text-gray-700">Panel del Delegado</h2>
           <div class="relative cursor-pointer">
             <img src="https://ui-avatars.com/api/?name=Delegado&background=34a01c&color=fff" width="36" height="36" class="rounded-full border border-gray-100" alt="Delegate Avatar">
           </div>
       </header>

       <div class="p-8 max-w-7xl mx-auto w-full">
         
         @if (currentView() === 'dashboard') {
           <div class="bg-white p-6 rounded-lg border border-gray-100 shadow-sm mb-8">
               <label class="block text-sm font-bold text-gray-700 mb-2">Estás gestionando el equipo:</label>
               <select 
                   [ngModel]="selectedTeamId()" 
                   (change)="onTeamChange($event)"
                   class="w-full md:w-1/2 border border-gray-300 rounded-lg px-4 py-2 focus:ring-[#34a01c] focus:border-[#34a01c]">
                   @for (t of teams(); track t.id) {
                       <option [value]="t.id">{{ t.name }}</option>
                   }
                   @if (teams().length === 0) { <option disabled>Cargando equipos...</option> }
               </select>
           </div>

           <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
               <div class="bg-[#f0fdf4] p-6 rounded-lg flex flex-col items-center justify-center text-center border border-green-50 shadow-sm">
                 <div class="text-[#34a01c] mb-2"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div>
                 <p class="text-sm text-gray-600 font-medium mb-1">Plantilla Habilitada</p>
                 <h3 class="text-3xl font-bold text-gray-900">{{ players().length }}</h3>
               </div>
               
               <div class="bg-white p-6 rounded-lg border border-gray-100 shadow-sm flex flex-col justify-center gap-3">
                    <button (click)="currentView.set('registrar-jugador')" class="w-full py-2 px-4 bg-[#34a01c] hover:bg-[#2b8517] text-white rounded text-sm font-bold flex items-center justify-center gap-2 transition-colors">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                        Inscribir Jugador
                    </button>
                    <button (click)="currentView.set('mis-jugadores')" class="w-full py-2 px-4 border border-gray-200 rounded text-sm font-medium text-gray-600 hover:bg-gray-50 flex items-center justify-center gap-2">
                        Ver Lista Completa
                    </button>
               </div>
           </div>

         } @else if (currentView() === 'registrar-jugador') {
            <div class="w-full max-w-4xl mx-auto bg-white p-8 rounded-xl shadow-sm border border-gray-100 animate-fade-in">
                <div class="flex items-center gap-4 mb-6">
                    <button (click)="currentView.set('mis-jugadores')" class="text-gray-500 hover:text-[#34a01c]">
                       <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    </button>
                    <h2 class="text-2xl font-bold text-gray-900">Inscribir Nuevo Jugador</h2>
                </div>

                <form [formGroup]="playerForm" (ngSubmit)="onSubmitPlayer()" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                           <label class="block text-sm font-medium text-gray-700">Nombres</label>
                           <input type="text" formControlName="name" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-[#34a01c] focus:border-[#34a01c]" placeholder="Juan">
                        </div>
                        <div>
                           <label class="block text-sm font-medium text-gray-700">Apellidos</label>
                           <input type="text" formControlName="lastName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-[#34a01c] focus:border-[#34a01c]" placeholder="Pérez">
                        </div>
                        <div>
                           <label class="block text-sm font-medium text-gray-700">C.I. (Solo números)</label>
                           <input type="text" formControlName="ci" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-[#34a01c] focus:border-[#34a01c]">
                        </div>
                        <div>
                           <label class="block text-sm font-medium text-gray-700">Dorsal (Camiseta)</label>
                           <input type="number" formControlName="dorsal" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-[#34a01c] focus:border-[#34a01c]">
                        </div>
                        <div>
                           <label class="block text-sm font-medium text-gray-700">Fecha de Nacimiento</label>
                           <input type="date" formControlName="birthDate" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-[#34a01c] focus:border-[#34a01c]">
                        </div>
                        <div>
                           <label class="block text-sm font-medium text-gray-700">Posición</label>
                           <select formControlName="position" class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-white">
                               <option value="Portero">Portero</option>
                               <option value="Defensa">Defensa</option>
                               <option value="Mediocampista">Mediocampista</option>
                               <option value="Delantero">Delantero</option>
                           </select>
                        </div>
                    </div>

                    <div class="flex justify-end gap-4 pt-4 border-t border-gray-100">
                        <button type="button" (click)="currentView.set('mis-jugadores')" class="px-6 py-2.5 border border-gray-300 rounded-lg text-gray-700 font-medium">Cancelar</button>
                        <button type="submit" [disabled]="playerForm.invalid || isSubmitting()" class="px-6 py-2.5 bg-[#34a01c] hover:bg-[#2b8517] text-white rounded-lg font-bold disabled:opacity-50">
                            {{ isSubmitting() ? 'Guardando...' : 'Guardar Jugador' }}
                        </button>
                    </div>
                </form>
            </div>

         } @else if (currentView() === 'mis-jugadores') {
           <div class="bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden animate-fade-in">
               <div class="px-8 py-6 border-b border-gray-100 flex items-center justify-between">
                   <h3 class="text-xl font-bold text-gray-900">Plantilla Oficial</h3>
                   <button (click)="currentView.set('registrar-jugador')" class="flex items-center gap-2 bg-[#34a01c] hover:bg-[#2b8517] text-white px-5 py-2.5 rounded-lg shadow-sm font-medium transition-colors">
                       + Nuevo
                   </button>
               </div>
               
               @if (isLoading()) {
                   <div class="p-10 text-center">Cargando jugadores...</div>
               } @else {
                   <div class="overflow-x-auto">
                       <table class="w-full text-left">
                           <thead class="bg-gray-50 text-gray-500 text-xs uppercase">
                               <tr>
                                   <th class="px-8 py-4">Nombre</th>
                                   <th class="px-8 py-4">Posición</th>
                                   <th class="px-8 py-4">Dorsal</th>
                                   <th class="px-8 py-4">C.I.</th>
                                   <th class="px-8 py-4 text-right">Acción</th>
                               </tr>
                           </thead>
                           <tbody class="divide-y divide-gray-100">
                               @for (player of players(); track player.id) {
                                   <tr class="hover:bg-gray-50">
                                       <td class="px-8 py-4 font-bold text-gray-900">{{ player.name }}</td>
                                       <td class="px-8 py-4 text-gray-600">{{ player.position }}</td>
                                       <td class="px-8 py-4 font-bold text-[#34a01c] text-lg">#{{ player.dorsal }}</td>
                                       <td class="px-8 py-4 text-gray-500">{{ player.ci }}</td>
                                       <td class="px-8 py-4 text-right">
                                           <button (click)="deletePlayer(player.id)" class="text-red-500 hover:text-red-700 text-sm font-medium">Eliminar</button>
                                       </td>
                                   </tr>
                               }
                               @if (players().length === 0) {
                                   <tr><td colspan="5" class="p-8 text-center text-gray-500">No hay jugadores registrados en este equipo.</td></tr>
                               }
                           </tbody>
                       </table>
                   </div>
               }
           </div>
         } @else {
             <div class="p-10 text-center border-2 border-dashed border-gray-300 rounded-lg text-gray-500">
                 Sección en construcción.
             </div>
         }
       </div>
    </div>
</div>